<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script>
    function startGuess(max=100/*æ•°å­—çš„èŒƒå›´*/, cheat=false/*ä½œå¼Šï¼Ÿ*/) {
      // å¾—åˆ°éšæœºæ•°
      // å› ä¸ºMath.floor((Math.random() * max))å¾—åˆ°çš„æ•°å­—æ˜¯0 -- n-1 ä¹‹é—´çš„ï¼Œæ‰€ä»¥+1
      const random = Math.floor((Math.random() * max)) + 1
      // ä½œå¼Šçš„è¯åœ¨æ§åˆ¶å°æ‰“å°éšæœºæ•°ğŸ˜‚
      if (cheat) console.warn("***ä½œå¼Šè€…ï¼***", random)
      // å› ä¸ºè¿™ä¸ªæ¶ˆæ¯ä¸æƒ³æ¯æ¬¡éƒ½æ‹¼ä¸€æ¬¡ï¼Œæ‰€ä»¥å®šä¹‰æˆå…¨å±€çš„
      const msg = 'è¯·è¾“å…¥1-' + max + 'ä¹‹é—´çš„æ•°å­—'
      // æç¤ºç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶å¾—åˆ°ç”¨æˆ·è¾“å…¥çš„æ•°å­—ï¼Œç»“æœä»Stringè½¬æ¢æˆNumber
      const ask = (isFirstTime, isBigger) => parseInt(prompt(isFirstTime ? msg : (msg + '\nä¸Šæ¬¡çš„ç»“æœæ¯”è¾ƒ: ' + (isBigger ? 'å¤§' : 'å°'))))
      // æˆåŠŸ
      const success = (loopTimes, answer) => alert(answer + ' çŒœå¯¹äº†ï¼å…±ç”¨äº†' + loopTimes + 'æ¬¡ã€‚')
      // å¤±è´¥
      const fail = () => alert('å¤±è´¥äº†')

      // è°ƒåº¦å‡½æ•°ï¼Œä¹Ÿæ˜¯é€»è¾‘çš„ä¸»å¹²----ç”±æ­¤è¿‡ç¨‹å‡½æ•°æ¥æ§åˆ¶ç¨‹åºçš„ä¸»è¦é€»è¾‘
      const run = (loopTimes = 0, lastAnswer = 0) => {
        const answer = ask(loopTimes === 0, lastAnswer > random)
        if (answer!==answer /* ç”¨äºåˆ¤æ–­answeræ˜¯ä¸æ˜¯NaNï¼Œjsä¸­åªæœ‰NaNè¿™ä¸ªå€¼ä¼šäº§ç”ŸNaN!==NaNæ˜¯trueçš„å¥‡è‘©æ•ˆæœï¼Œæ‰€ä»¥answerå’Œè‡ªå·±æ¯”è¾ƒï¼Œå¦‚æœä¸ç›¸ç­‰ï¼Œè¯´æ˜å®ƒæ˜¯NaN */) {
          fail()
        } else if(answer!==random) {
          // æ²¡çŒœå¯¹ï¼Œæ‰€ä»¥æŠŠloopTimes+1å’Œæœ¬æ¬¡çš„ç­”æ¡ˆå†æ¬¡é€å…¥runä¸­
          // â­â­â­â­â­
          // è¿™ä¸€å¥æ˜¯è¿™ä¸ªç»ƒä¹ çš„é‡ç‚¹ï¼Œè¦æ·±åˆ»ç†è§£å¹¶ä¹ æƒ¯é€’å½’å‡½æ•°çš„åº”ç”¨
          // â­â­â­â­â­
          run(loopTimes+1, answer)
        } else {
          // ä»¥ä¸Šéƒ½ä¸ç¬¦åˆï¼Œæ‰€ä»¥åªèƒ½æˆåŠŸ
          success(loopTimes+1, answer)
        }
      }

      // å¯åŠ¨
      run()
    }
  </script>
</head>

<body>
  <button id="startBtn" onClick="startGuess(100, true)">å¼€å§‹</button>
</body>

</html>